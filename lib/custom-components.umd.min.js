!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("axios"),require("rxjs"),require("rxjs/operators"),require("@ng-bootstrap/ng-bootstrap"),require("angular-formio"),require("@angular/common/http"),require("@angular/forms")):"function"==typeof define&&define.amd?define("custom-components",["exports","@angular/core","axios","rxjs","rxjs/operators","@ng-bootstrap/ng-bootstrap","angular-formio","@angular/common/http","@angular/forms"],t):t((e=e||self)["custom-components"]={},e.ng.core,e.axios,e.rxjs,e.rxjs.operators,e.ngBootstrap,e.angularFormio,e.ng.common.http,e.ng.forms)}(this,(function(e,t,n,r,o,a,i,u,c){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;function l(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function s(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))}function p(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var f=function(){function e(){var e=this;this.getData=function(){return n.create({headers:{common:{Authorization:"JWT "+localStorage.token}}})},this.get=function(t){return e.getData().get(t)}}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=l([t.Injectable({providedIn:"root"})],e)}(),d=function(){function e(e){var t=this;this.dataService=e,this.values=[],this.focus$=new r.Subject,this.click$=new r.Subject,this.formatter=function(e){return e.value},this.search=function(e){var n=e.pipe(o.debounceTime(200),o.distinctUntilChanged()),a=t.click$.pipe(o.filter((function(){return!t.instance.isPopupOpen()}))),i=t.focus$;return r.merge(n,i,a).pipe(o.map((function(e){return(""===e?t.values:t.values.filter((function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}))).slice(0,10)})))},this.searchItems=function(){return s(t,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return this.value.length%3!=0?[3,2]:[4,this.dataService.get(this.url)];case 1:e=t.sent(),console.log({data:e}),this.values=e.data,console.log("typeahed updated: "+this.value),t.label=2;case 2:return[2]}}))}))}}return e.prototype.ngOnInit=function(){console.log({customOptions:this.url})},e.ctorParameters=function(){return[{type:f}]},l([t.Input()],e.prototype,"url",void 0),l([t.ViewChild("instance",{static:!0})],e.prototype,"instance",void 0),e=l([t.Component({selector:"tm-custom-components",template:'\n  <label for="typeahead-focus">Select favourite colour:</label>\n  <input\n    id="typeahead-focus"\n    type="text"\n    class="form-control"\n    [(ngModel)]="value"\n    [ngbTypeahead]="search"\n    (focus)="focus$.next($any($event).target.value)"\n    (click)="click$.next($any($event).target.value)"\n    (keyup)="searchItems()"\n    [resultFormatter]="formatter"\n    [inputFormatter]="formatter"\n    #instance="ngbTypeahead"\n  />\n  '})],e)}();var h={type:"selectTypeahead",selector:"select-typeahead",title:"Custom select",group:"basic",icon:"fa fa-th-list",editForm:function(){return{components:[{key:"type",type:"hidden"},{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Label",validate:{required:!0}},{weight:10,type:"textfield",input:!0,key:"key",label:"Field Code",placeholder:"Field Code",tooltip:"The code/key/ID/name of the field.",validate:{required:!0,maxLength:128,pattern:"[A-Za-z]\\w*",patternMessage:"The property name must only contain alphanumeric characters, \n underscores and should only be started by any letter character."}},{weight:20,type:"textfield",input:!0,value:"url",key:"customOptions.url",label:"Url to search",placeholder:"Url to search",validate:{required:!0}}]}}};var m=function(){function e(e){!function(e){i.registerCustomFormioComponent(h,d,e)}(e)}return e.ctorParameters=function(){return[{type:t.Injector}]},e=l([t.NgModule({declarations:[d],imports:[u.HttpClientModule,a.NgbModule,c.FormsModule,i.FormioModule],providers:[u.HttpClient],exports:[d],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]})],e)}();e.CustomComponentsComponent=d,e.CustomComponentsModule=m,e.CustomComponentsService=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=custom-components.umd.min.js.map